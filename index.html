<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Controle de CO2</title>
    <link rel="stylesheet" href="/style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Sistema de Controle de CO2</h1>
            <p>Monitoramento e controle para otimiza√ß√£o da fotoss√≠ntese</p>
            <div class="wifi-status">
                <div class="wifi-icon">üì∂</div>
                <span id="wifi-name">Carregando...</span>
            </div>
        </header>
        
        <div class="tabs">
            <button class="tab-btn active" data-tab="dashboard">Dashboard</button>
            <button class="tab-btn" data-tab="history">Hist√≥rico</button>
            <button class="tab-btn" data-tab="config">Configura√ß√µes</button>
            <button class="tab-btn" data-tab="calibration">Calibra√ß√£o</button>
        </div>
        
        <div id="dashboard" class="tab-content active">
            <div class="dashboard-grid">
                <div class="card">
                    <div class="card-title">
                        N√≠vel de CO2
                        <span id="co2-status" class="status-text"></span>
                    </div>
                    <div class="card-value" id="co2-value">--</div>
                    <div class="card-unit">ppm</div>
                    <div class="gauge-container">
                        <div class="gauge">
                            <div class="gauge-value" id="co2-gauge" style="height: 0%"></div>
                            <div class="gauge-labels">
                                <div class="gauge-label">2000+</div>
                                <div class="gauge-label">1500</div>
                                <div class="gauge-label">1000</div>
                                <div class="gauge-label">500</div>
                                <div class="gauge-label">0</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-title">Temperatura</div>
                    <div class="card-value" id="temp-value">--.-</div>
                    <div class="card-unit">¬∞C</div>
                    <div class="status-indicator">
                        <div class="indicator" id="temp-indicator"></div>
                        <div class="status-text" id="temp-status">--</div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-title">Status do Solen√≥ide</div>
                    <div class="card-value">
                        <div class="status-indicator" id="solenoid-status">
                            <div class="indicator"></div>
                            <div class="status-text">--</div>
                        </div>
                    </div>
                    <div class="card-unit" id="solenoid-desc">--</div>
                    <button class="btn" id="toggle-solenoid">Controle Manual</button>
                </div>
            </div>
            
            <!-- Nova se√ß√£o para integra√ß√£o Smart Life -->
            <div class="card">
                <div class="card-title">Smart Life Hub</div>
                <div class="integration-status">
                    <div class="status-indicator" id="smartlife-status">
                        <div class="indicator"></div>
                        <div class="status-text">--</div>
                    </div>
                    <p id="smartlife-details">Carregando...</p>
                </div>
            </div>
            
            <div class="card">
                <div class="card-title">Leituras Recentes</div>
                <div class="chart-container">
                    <!-- Alterado de canvas para div -->
                    <div id="readings-chart" style="width:100%; height:300px;"></div>
                </div>
            </div>
        </div>
        
        <div id="history" class="tab-content">
            <div class="card">
                <div class="card-title">Hist√≥rico de CO2 (24h)</div>
                <div class="chart-container">
                    <!-- Alterado de canvas para div -->
                    <div id="co2-history-chart" style="width:100%; height:300px;"></div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-title">Ativa√ß√µes do Solen√≥ide</div>
                <div class="chart-container">
                    <!-- Alterado de canvas para div -->
                    <div id="solenoid-history-chart" style="width:100%; height:300px;"></div>
                </div>
            </div>
        </div>
        
        <!-- Nova aba de calibra√ß√£o -->
        <div id="calibration" class="tab-content">
            <div class="card">
                <div class="card-title">Calibra√ß√£o do Sensor CO2</div>
                <div class="calibration-section">
                    <h3>Calibra√ß√£o Ponto Zero (400 ppm)</h3>
                    <p>Use esta op√ß√£o para calibrar o sensor MH-Z19E para 400 ppm quando exposto ao ar fresco (ao ar livre).</p>
                    <div class="warning-text">
                        <strong>Aten√ß√£o:</strong> Para calibrar o ponto zero, coloque o sensor em um ambiente com ar fresco (aproximadamente 400 ppm de CO2).
                    </div>
                    <button class="btn btn-warning" id="calibrate-zero">Calibrar Ponto Zero (400 ppm)</button>
                </div>
                
                <div class="calibration-section">
                    <h3>Calibra√ß√£o SPAN</h3>
                    <p>Use esta op√ß√£o quando tiver uma fonte de CO2 de concentra√ß√£o conhecida para calibrar o sensor corretamente.</p>
                    <div class="warning-text">
                        <strong>Aten√ß√£o:</strong> A calibra√ß√£o SPAN requer uma fonte de g√°s CO2 de concentra√ß√£o conhecida.
                    </div>
                    <div class="form-group">
                        <label>Valor SPAN para Calibra√ß√£o (ppm)</label>
                        <input type="number" id="span-value" value="2000" min="1000" max="5000">
                        <input type="range" class="range-slider" id="span-value-slider" min="1000" max="5000" step="100" value="2000">
                    </div>
                    <p class="help-text">
                        O valor comum para calibra√ß√£o SPAN √© entre 1000 ppm e 5000 ppm, dependendo do g√°s de calibra√ß√£o dispon√≠vel.
                    </p>
                    <button class="btn btn-warning" id="calibrate-span">Calibrar SPAN</button>
                </div>
                
                <div class="calibration-section">
                    <h3>Valores Atuais</h3>
                    <div class="current-values">
                        <p>CO2 Atual: <span id="current-co2">--</span> ppm</p>
                        <p>Temperatura: <span id="current-temp">--</span> ¬∞C</p>
                        <p>Valor SPAN Configurado: <span id="current-span">--</span> ppm</p>
                    </div>
                </div>
            </div>
        </div>
        
        <div id="config" class="tab-content">
            <div class="config-form">
                <h2>Configura√ß√µes do Sistema</h2>
                
                <div class="form-group">
                    <label>Nome da Rede Wi-Fi</label>
                    <input type="text" id="wifi-ssid" placeholder="Digite o nome da sua rede Wi-Fi">
                </div>
                
                <div class="form-group">
                    <label>Senha da Rede Wi-Fi</label>
                    <input type="password" id="wifi-password" placeholder="Digite a senha da sua rede Wi-Fi">
                </div>
                
                <div class="form-group">
                    <label>N√≠vel M√≠nimo de CO2 (ppm)</label>
                    <input type="number" id="min-co2" value="800" min="400" max="2000">
                    <input type="range" class="range-slider" id="min-co2-slider" min="400" max="2000" value="800">
                </div>
                
                <div class="form-group">
                    <label>N√≠vel M√°ximo de CO2 (ppm)</label>
                    <input type="number" id="max-co2" value="1500" min="500" max="2500">
                    <input type="range" class="range-slider" id="max-co2-slider" min="500" max="2500" value="1500">
                </div>
                
                <div class="form-group">
                    <label>Intervalo de Leitura (segundos)</label>
                    <input type="number" id="reading-interval" value="30" min="5" max="300">
                </div>
                
                <div class="form-group">
                    <label>Modo de Opera√ß√£o</label>
                    <select id="operation-mode">
                        <option value="true">Autom√°tico</option>
                        <option value="false">Manual</option>
                    </select>
                </div>
                
                <h3 style="margin-top: 30px; margin-bottom: 15px; border-bottom: 1px solid #eee; padding-bottom: 10px;">Integra√ß√£o Smart Life</h3>
                
                <div class="form-group">
                    <label>IP do Hub Smart Life</label>
                    <input type="text" id="smartlife-ip" placeholder="Digite o IP do Hub (ex: 192.168.1.100)">
                    <p class="help-text">
                        Insira o endere√ßo IP do seu Hub Smart Life para permitir a comunica√ß√£o.
                    </p>
                </div>
                
                <div class="form-group">
                    <label>Porta do Hub Smart Life</label>
                    <input type="number" id="smartlife-port" value="80" min="1" max="65535">
                    <p class="help-text">
                        A porta padr√£o √© 80. Modifique apenas se seu Hub usar uma porta diferente.
                    </p>
                </div>
                
                <div class="form-group">
                    <label>ID do Dispositivo Smart Life</label>
                    <input type="text" id="smartlife-id" placeholder="ID do dispositivo no Smart Life">
                </div>
                
                <div class="form-group">
                    <label>Chave de API Smart Life</label>
                    <input type="password" id="smartlife-key" placeholder="Chave de API (se necess√°rio)">
                </div>
                
                <div class="form-group">
                    <input type="checkbox" id="enable-notifications" style="width: auto; margin-right: 10px;">
                    <label for="enable-notifications" style="display: inline;">Enviar Notifica√ß√µes para o Smart Life</label>
                </div>
                
                <button class="btn" id="save-config">Salvar Configura√ß√µes</button>
                <button class="btn" id="pair-device" style="background-color: #3498db;">Testar Conex√£o com Hub</button>
            </div>
        </div>
    </div>
    
    <script src="/chart.js"></script>
    <script src="/script.js" defer></script>
</body>
</html>